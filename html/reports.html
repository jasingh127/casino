<!DOCTYPE html>
<meta charset="utf-8">
<head>
    <title> Game Reports </title>
    <link rel="stylesheet" href="../css/third_party/plottable.css">
    <link rel="stylesheet" href="../css/third_party/bootstrap.min.css">
    <link rel="stylesheet" href="../css/third_party/bootstrap-theme.min.css">
    <link rel="stylesheet" href="../css/third_party/jquery.dataTables-1.10.0.css">
    <link rel="stylesheet" href="../css/third_party/scroller.dataTables.min.css">
    <link rel="stylesheet" href="../css/third_party/jquery-ui.css">

    <script type="text/javascript" src="../js/third_party/jquery-2.2.0.min.js"></script>
    <script type="text/javascript" src="../js/third_party/bootstrap.min.js"></script>
    <script type="text/javascript" src="../js/third_party/d3.v3.min.js"></script>
    <script type="text/javascript" src="../js/third_party/d3.tip.v0.6.3.js"></script>
    <script type="text/javascript" src="../js/third_party/jquery.dataTables-1.10.0.js"></script>
    <script type="text/javascript" src="../js/third_party/dataTables.scroller.min.js"></script>
    <script type="text/javascript" src="../js/third_party/plottable.js"></script>
    <script type="text/javascript" src="../js/third_party/d3-jetpack.js"></script>
    <script type="text/javascript" src="../js/third_party/gunzip.min.js"></script>
    <script type="text/javascript" src="../js/third_party/underscore-min.js"></script>
    <script type="text/javascript" src="../js/third_party/jquery-ui.js"></script>

    <script type="text/javascript" src="../js/miscutil.js"></script>
    <script type="text/javascript" src="../js/dbutil.js"></script>
    <script type="text/javascript" src="../js/plottableutil.js"></script>

    <script src="https://www.google.com/cloudprint/client/cpgadget.js"></script>

    <script>
      /***************************************************************************
      // Global variables to store persistent state
      ****************************************************************************/
      var report_data = { 
        start_date: null,
        end_date: null
      };
    </script>

    <script>
      $( function() { 
        start_date_callback = function(date) {
          report_data.start_date = new Date(date.getTime());
          report_data.end_date = new Date(date.getTime() + 60 * 60 * 24 * 6 * 1000);
          $("#start_date").val(MiscUtil.date_to_str(report_data.start_date)); 
          $("#end_date").val(MiscUtil.date_to_str(report_data.end_date)); 

        };
        MiscUtil.date_picker_helper("#start_date", start_date_callback); 
      });

      $( function() { 
        end_date_callback = function(date) {
          report_data.start_date = new Date(date.getTime() - 60 * 60 * 24 * 6 * 1000);
          report_data.end_date = new Date(date.getTime());
          $("#start_date").val(MiscUtil.date_to_str(report_data.start_date)); 
          $("#end_date").val(MiscUtil.date_to_str(report_data.end_date)); 
        };
        MiscUtil.date_picker_helper("#end_date", end_date_callback); 
      });
    </script>

</head>

<body>
  <br>
  <center> <h1> Pick the week for which you want to see the reports. </h1> </center>
  <br>
  <center> <p> Start Date: <input type="text" id="start_date"></p> </center>
  <center> <p> End Date: <input type="text" id="end_date"></p> </center>
  <br>
  <center> <h3> Weekly Average Report - One Week - Bar Chart </h3> </center>
  <center> <svg id="weekly_bar_chart" width=80% height="1200"></svg> </center>
  <br>
  <center> <h3> Weekly Numbers Only For One Week </h3> </center>
  <center> <svg id="weekly_numbers" width=80% height="600"></svg> </center>  <br>
  <br>
  <center> <h3> One Week Spreadsheet Report </h3> </center>
  <center> <svg id="one_week_spreadsheet" width=80% height="600"></svg> </center>  <br>
  <br>
  <center> <h3> Day of the Week Game Bar Chart Comparison </h3> </center>
  <center> <svg id="dow_bar_chart" width=80% height="600"></svg> </center>
  <br>

  <script>
    $(function() {
      /***************************************************************************
      // Show today's date in the input box
      ****************************************************************************/
      var today = new Date();
      var week_ago = new Date();
      week_ago.setDate(today.getDate() - 6);
      
      report_data.start_date = week_ago;
      report_data.end_date = today;

      $("#start_date").val(MiscUtil.date_to_str(report_data.start_date)); 
      $("#end_date").val(MiscUtil.date_to_str(report_data.end_date)); 

      /***************************************************************************
      // Google cloud print functionality
      ****************************************************************************/
      var gadget = new cloudprint.Gadget();
      gadget.setPrintButton(
        cloudprint.Gadget.createDefaultPrintButton("print_button_container")); // div id to contain the button
      // gadget.setPrintDocument("[document mimetype]", "[document title]", "[document content]", "[encoding] (optional)");
      gadget.setPrintDocument("url", "Test Page", "https://www.google.com/landing/cloudprint/testpage.pdf");

    }); 

  </script>
</body>
